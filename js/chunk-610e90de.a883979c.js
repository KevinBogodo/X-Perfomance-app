(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-610e90de","chunk-7e759614","chunk-2d0c0841"],{3485:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"Utilisateur",name:"first"}},[e("UtilisateurPresence",{attrs:{usersOption:t.usersOption,userSelect:t.userSelect}})],1),e("el-tab-pane",{attrs:{label:"Global Agences",name:"second"}},[e("GbAgencePresence",{attrs:{agencesOption:t.agencesOption,agenceSelect:t.agenceSelect}})],1)],1)},o=[],s=a("c7eb"),i=a("1da1"),r=(a("d3b7"),a("159b"),a("caad"),a("14d9"),a("b0c0"),a("3c65"),a("2532"),a("323e")),c=a.n(r),l=(a("a5d8"),a("cee4")),d=a("69b0"),u=a("6b3d"),p=a("41b0"),f={components:{UtilisateurPresence:d["default"],GbAgencePresence:u["default"],GbutilisateurPresence:p["default"]},data:function(){return{activeName:"first",agencesOption:[],agenceSelect:[],usersOption:[],userSelect:[]}},methods:{handleClick:function(t,e){c.a.start(),console.log(t,e),c.a.done()},loadFilter:function(){var t=this;return Object(i["a"])(Object(s["a"])().mark((function e(){var a,n,o,i,r,d,u;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c.a.start(),e.prev=1,e.next=4,l["a"].get("xperf/report/filter");case 4:a=e.sent,n=a.data.agences,o=a.data.users,i=[],r=[],d=[],u=[],n.forEach((function(t){i.includes(t.code)||(i.push(t.code),d.push({label:t.nom,value:t.code}))})),o.forEach((function(t){r.includes(t.id)||(r.push(t.id),u.push({label:t.name,value:t.id}))})),d.length>1&&d.unshift({label:"Tous",value:"Tous"}),t.agencesOption=d,t.agenceSelect=t.agencesOption[0],t.usersOption=u,t.userSelect=t.usersOption[0],e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](1),t.$notify({type:"error",title:"Echec de recuperation"});case 23:c.a.done();case 24:case"end":return e.stop()}}),e,null,[[1,20]])})))()}},created:function(){this.loadFilter()}},h=f,m=a("2877"),b=Object(m["a"])(h,n,o,!1,null,null,null);e["default"]=b.exports},"41b0":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("h1",[t._v("gb presence")])},o=[],s=a("2877"),i={},r=Object(s["a"])(i,n,o,!1,null,null,null);e["default"]=r.exports},"69b0":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-xs-3 margin-bottom"},[e("label",{staticClass:"mb-2"},[t._v(" Format d'affichage: ")]),e("div",[e("el-radio",{attrs:{label:"jour"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("Jours")]),e("el-radio",{attrs:{label:"mois"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("Mois")])],1)]),"jour"==t.radio?e("div",{staticClass:"col-xl-4 col-lg-4 col-md-5 col-sm-6 col-xs-6 mb-1"},[e("label",[t._v("Choisir la période : ")]),e("div",{staticClass:"data-picker",staticStyle:{width:"100%"}},[e("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"-",format:"dd/MM/yyyy",clearable:t.clearable,"picker-options":t.pickerOptions_j},on:{change:function(e){return t.loadData()}},model:{value:t.drp_jour,callback:function(e){t.drp_jour=e},expression:"drp_jour"}})],1)]):t._e(),"mois"==t.radio?e("div",{staticClass:"col-xl-4 col-lg-4 col-md-5 col-sm-6 col-xs-6 mb-1"},[e("label",[t._v("Choisir la période : ")]),e("div",{staticClass:"data-picker",staticStyle:{width:"100%"}},[e("el-date-picker",{attrs:{format:"dd/MM/yyyy",type:"monthrange",align:"right","unlink-panels":"","range-separator":"à","start-placeholder":"Mois de début","end-placeholder":"Mois de fin","picker-options":t.pickerOptions_m},on:{change:function(e){return t.loadData()}},model:{value:t.drp_month,callback:function(e){t.drp_month=e},expression:"drp_month"}})],1)]):t._e(),e("div",{staticClass:"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-xs-3 margin-bottom"},[e("label",{staticClass:"mb-2"},[t._v(t._s(t.titleChoice)+" : ")]),e("div",{staticClass:"data-picker",staticStyle:{width:"100%"}},[e("ui-select",{attrs:{placeholder:t.titleChoice,options:t.usersOption},on:{change:function(e){return t.loadData()}},model:{value:t.userSelect,callback:function(e){t.userSelect=e},expression:"userSelect"}})],1)])]),1==t.empty?e("div",{staticClass:"row"},[e("el-divider"),e("el-empty",{attrs:{description:"Pas de données pour la période"}})],1):e("div",{staticClass:"row m-5 p-2"},[t._m(0),e("Barchart",{attrs:{data1:t.data1,data2:t.data2}})],1)])},o=[function(){var t=this,e=t._self._c;return e("h2",[e("i",[t._v(" Graphique en minutes du retard ")])])}],s=a("c7eb"),i=a("1da1"),r=(a("d3b7"),a("159b"),a("14d9"),a("caad"),a("2532"),a("997f")),c=a("cee4"),l=a("c1df"),d=a.n(l),u=a("323e"),p=a.n(u),f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mr-5 p-2"},[e("apexchart",{attrs:{height:"350px",type:"bar",options:t.options,series:t.series}})],1)},h=[],m=a("5530"),b=a("1321"),v=a.n(b),k={components:{apexchart:v.a},props:["data1","data2"],data:function(){return{options:{plotOptions:{bar:{horizontal:!1,borderRadius:5}},chart:{height:400,toolbar:{show:!0,tools:{download:!0,selection:!1,zoom:!1,zoomin:!1,zoomout:!1,pan:!1,reset:!1},export:{csv:{filename:"Analyse_Taux_de_retard_"+(new Date).toDateString(),columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(t){return new Date(t).toDateString()}},svg:{filename:"Analyse_Taux_de_retard_"+(new Date).toDateString()},png:{filename:"Analyse_Taux_de_retard_"+(new Date).toDateString()}}}},xaxis:{categories:[]},yaxis:[{seriesName:"Durée",axisTicks:{show:!0},axisBorder:{show:!0,color:"#9E9E9E"},title:{text:"Durée en minutes",style:{color:"#9E9E9E"}},tooltip:{enabled:!0}}],tooltip:{fixed:{enabled:!0,offsetY:30,offsetX:60}},legend:{horizontalAlign:"center",offsetX:40},noData:{text:"Veuillez vérifier les données",align:"center",verticalAlign:"middle"},markers:{size:5,colors:"#9E9E9E",strokeColors:"#feb830",fillOpacity:.6},bar:{dataLabels:{}},dataLabels:{enabled:!0,style:{colors:["#333"]}}},series:[{name:"Durée",type:"column",data:[]}]}},watch:{data1:function(){this.options=Object(m["a"])(Object(m["a"])({},this.options),{xaxis:{categories:this.data1}}),this.series[0].data=this.data2}},mounted:function(){this.series[0].data=this.data2,this.options=Object(m["a"])(Object(m["a"])({},this.options),{xaxis:{categories:this.data1}})}},D=k,x=a("2877"),_=Object(x["a"])(D,f,h,!1,null,null,null),g=_.exports,y={components:{Menu:r["default"],Barchart:g},props:["usersOption","userSelect"],data:function(){return{type:"utilisateur",titleChoice:"Choisir un utilisateur",data1:[],data2:[],radio:"jour",periode:"Choisir la periode",start:d()().subtract(12,"month").startOf("month").toDate(),end:d()().toDate(),clearable:!1,empty:1,drp:[],drp_jour:[d()().subtract(1,"isoweek").startOf("isoweek").toDate(),d()().toDate()],drp_month:[d()().subtract(4,"month").endOf("month").toDate(),d()().endOf("month").toDate()],pickerOptions_j:{shortcuts:[{text:"Mois precedent",onClick:function(t){t.$emit("pick",[d()().subtract(1,"month").startOf("month").toDate(),d()().subtract(1,"month").endOf("month").toDate()])}},{text:"Mois en cours",onClick:function(t){t.$emit("pick",[d()().startOf("month").toDate(),new Date])}},{text:"Semaine precedente",onClick:function(t){t.$emit("pick",[d()().subtract(1,"week").startOf("isoWeek").toDate(),d()().subtract(1,"week").endOf("isoWeek").toDate()])}},{text:"Semaine en cours",onClick:function(t){t.$emit("pick",[d()().startOf("isoWeek").toDate(),new Date])}},{text:"Avant hier",onClick:function(t){t.$emit("pick",[d()().subtract(2,"day").toDate(),d()().subtract(2,"day").toDate()])}},{text:"Hier",onClick:function(t){t.$emit("pick",[d()().subtract(1,"day").toDate(),d()().subtract(1,"day").toDate()])}},{text:"Aujoudhuit",onClick:function(t){t.$emit("pick",[d()().toDate(),new Date])}}],format:"dd MM yyyy",firstDayOfWeek:1,disabledDate:this.disabledDueDate},pickerOptions_m:{shortcuts:[{text:"Ce mois",onClick:function(t){t.$emit("pick",[d()().startOf("month").toDate(),d()().endOf("month").toDate()])}},{text:"Cette année",onClick:function(t){t.$emit("pick",[d()().startOf("year").toDate(),d()().endOf("month").toDate()])}},{text:"Les derniers 6 mois",onClick:function(t){t.$emit("pick",[d()().subtract(5,"month").startOf("month").toDate(),d()().toDate()])}}],format:"dd MM yyyy",firstDayOfWeek:1,disabledDate:this.disabledDueDate}}},watch:{radio:function(){this.loadData()},userSelect:function(){this.loadData()}},methods:{loadData:function(){var t=this;return Object(i["a"])(Object(s["a"])().mark((function e(){var a,n,o;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p.a.start(),e.prev=1,"jour"==t.radio?t.drp=t.drp_jour:"mois"==t.radio&&(t.drp=t.drp_month),a={id:t.userSelect.value,start:d()(new Date(t.drp[0])).startOf("day").format("YYYY-MM-DD HH:mm:ss.SSS"),end:d()(new Date(t.drp[1])).endOf("day").format("YYYY-MM-DD HH:mm:ss.SSS")},e.next=6,c["a"].post("xperf/report/userlog",a);case 6:n=e.sent,o=n.data.data_user,o.length>0?(t.empty=0,t.BuildApexChart(o)):t.empty=1,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),t.$notify({type:"error",title:"Echec de recuperation des informations "});case 14:p.a.done();case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))()},BuildApexChart:function(t){var e=this;if(this.data1=[],this.data2=[],"jour"==this.radio)t.forEach((function(t){var a=d()(new Date(t.jour)).format("DD/MM/YYYY");e.data1.push(a),e.data2.push(t.minute)}));else if("mois"==this.radio){this.data1=[],this.data2=[];t.forEach((function(t){e.data1.includes(t.mois_texte)||e.data1.push(t.mois_texte)})),this.data1.forEach((function(a){var n=0;t.forEach((function(t){t.mois_texte==a&&(n+=t.minute)})),e.data2.push(n)}))}}},created:function(){}},O=y,C=Object(x["a"])(O,n,o,!1,null,null,null);e["default"]=C.exports},"980d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("el-tabs",{staticClass:"m-2",staticStyle:{height:"85vh"},attrs:{type:"border-card"}},[e("el-tab-pane",{attrs:{label:"Présence"}},[e("MainPresence")],1),e("el-tab-pane",{attrs:{label:"Réalisations"}},[t._v("Config")]),e("el-tab-pane",{attrs:{label:"Inventaires"}},[t._v("Tâche")]),e("el-tab-pane",{attrs:{label:"Incidents"}},[t._v("Rôle")])],1)},o=[],s=(a("323e"),a("a5d8"),a("3485")),i={components:{MainPresence:s["default"]},data:function(){return{permissions:sessionStorage.getItem("permissions")}},mounted:function(){}},r=i,c=a("2877"),l=Object(c["a"])(r,n,o,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-610e90de.a883979c.js.map