{"version":3,"sources":["webpack:///./node_modules/core-js/internals/same-value.js","webpack:///./src/views/dashboard/pages/Commande/StoryCmd.vue","webpack:///./src/components/dashboard/orders/TableList.vue","webpack:///src/components/dashboard/orders/TableList.vue","webpack:///./src/components/dashboard/orders/TableList.vue?a9f1","webpack:///./src/components/dashboard/orders/TableList.vue?afed","webpack:///src/views/dashboard/pages/Commande/StoryCmd.vue","webpack:///./src/views/dashboard/pages/Commande/StoryCmd.vue?c40f","webpack:///./src/views/dashboard/pages/Commande/StoryCmd.vue?8dfb","webpack:///./node_modules/core-js/modules/es.string.search.js","webpack:///./src/views/dashboard/pages/Commande/StoryCmd.vue?1141"],"names":["module","exports","Object","is","x","y","_c","_self","staticClass","staticStyle","clearable","callback","drp","expression","_v","statusSelect","usersSelect","_vm","all_commande","length","attrs","type","loading","staticRenderFns","render","this","filter","data","search","code","toLowerCase","includes","scopedSlots","_u","key","fn","scope","row","status","_s","status_t","_e","handleChangeState","model","value","$$v","$set","_l","optionStatus","item","label","disabled","slot","props","methods","NProgress","console","showRow","updateCommande","commande","id","axios","title","component","components","TableList","is_done","usersList","periode","start","end","pickerOptions","shortcuts","text","onClick","picker","format","firstDayOfWeek","disabledDate","created","moment","disabledDueDate","loadFilter","crm","response","res","tab_status","tab","name","s","loadConfig","user","commandes","element","call","fixRegExpWellKnownSymbolLogic","anObject","isNullOrUndefined","requireObjectCoercible","sameValue","toString","getMethod","regExpExec","SEARCH","nativeSearch","maybeCallNative","regexp","O","searcher","undefined","RegExp","string","rx","S","done","previousLastIndex","lastIndex","result","index"],"mappings":"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","file":"js/chunk-2a821d77.ef83099b.js","sourcesContent":["// `SameValue` abstract operation\n// https://tc39.es/ecma262/#sec-samevalue\n// eslint-disable-next-line es/no-object-is -- safe\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-5\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-xl-3 col-lg-4 col-md-5 col-sm-6 col-xs-6 mb-1\"},[_c('label',[_vm._v(_vm._s(_vm.periode)+\" : \")]),_c('div',{staticClass:\"data-picker\",staticStyle:{\"width\":\"100%\"}},[_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"unlink-panels\":\"\",\"range-separator\":\"-\",\"format\":\"dd/MM/yyyy\",\"clearable\":_vm.clearable,\"picker-options\":_vm.pickerOptions},on:{\"change\":function($event){return _vm.loadFilter()}},model:{value:(_vm.drp),callback:function ($$v) {_vm.drp=$$v},expression:\"drp\"}})],1)]),_c('div',{staticClass:\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-xs-3 margin-bottom\"},[_c('label',[_vm._v(\"Choisir le status : \")]),_c('div',{staticClass:\"data-picker\",staticStyle:{\"width\":\"100%\"}},[_c('ui-select',{attrs:{\"placeholder\":\"Choisir une usine\",\"options\":_vm.status},on:{\"change\":function($event){return _vm.loadConfig()}},model:{value:(_vm.statusSelect),callback:function ($$v) {_vm.statusSelect=$$v},expression:\"statusSelect\"}})],1)]),_c('div',{staticClass:\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-xs-3 margin-bottom ml-2\"},[_c('label',[_vm._v(\"Auteur : \")]),_c('div',{staticClass:\"data-picker\",staticStyle:{\"width\":\"100%\"}},[_c('ui-select',{attrs:{\"placeholder\":\"Choisir une usine\",\"options\":_vm.usersList},on:{\"change\":function($event){return _vm.loadConfig()}},model:{value:(_vm.usersSelect),callback:function ($$v) {_vm.usersSelect=$$v},expression:\"usersSelect\"}})],1)])]),_c('v-divider',{staticClass:\"mt-5\"}),((_vm.all_commande.length > 0) && (_vm.loading == false))?_c('div',{staticClass:\"card mt-3\"},[_c('TableList',{attrs:{\"all_commande\":_vm.all_commande,\"loadConfig\":_vm.loadFilter,\"type\":_vm.type}})],1):_vm._e(),_c('div',{staticClass:\"mt-3\"},[[_c('el-skeleton',{attrs:{\"loading\":_vm.loading,\"animated\":\"\",\"rows\":6}})]],2),((_vm.all_commande.length == 0 || _vm.all_commande.length == '' || _vm.all_commande.length == ' ') && (_vm.loading == false))?_c('div',{staticClass:\"resultat\"},[_c('el-empty',{attrs:{\"description\":\"Pas de donnÃ©es\"}})],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-table',{staticStyle:{\"width\":\"100% cursor:pointer\"},attrs:{\"data\":_vm.all_commande.filter(data => !_vm.search || data.code.toLowerCase().includes(_vm.search.toLowerCase()))}},[_c('el-table-column',{attrs:{\"label\":\"status\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.status == 0)?_c('el-tag',{attrs:{\"type\":\"info\",\"size\":\"medium\"}},[_vm._v(_vm._s(scope.row.status_t))]):_vm._e(),(scope.row.status == 1)?_c('el-tag',{attrs:{\"size\":\"medium\"}},[_vm._v(_vm._s(scope.row.status_t))]):_vm._e(),(scope.row.status == 2)?_c('el-tag',{attrs:{\"type\":\"success\",\"size\":\"medium\"}},[_vm._v(_vm._s(scope.row.status_t))]):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"label\":\"Code\",\"prop\":\"code\"}}),_c('el-table-column',{attrs:{\"label\":\"Client\",\"prop\":\"nom_client\"}}),_c('el-table-column',{attrs:{\"label\":\"Prix total\",\"prop\":\"prix_total\"}}),_c('el-table-column',{attrs:{\"label\":\"Auteur\",\"prop\":\"name\"}}),_c('el-table-column',{attrs:{\"label\":\"Date de creation\",\"prop\":\"created_at\"}}),_c('el-table-column',{attrs:{\"align\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"row mr-2\"},[_c('el-select',{staticClass:\"col\",attrs:{\"change\":_vm.handleChangeState(scope.row),\"placeholder\":\"Status\",\"size\":\"small\"},model:{value:(scope.row.status),callback:function ($$v) {_vm.$set(scope.row, \"status\", $$v)},expression:\"scope.row.status\"}},_vm._l((_vm.optionStatus),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value,\"disabled\":item.disabled}})}),1)],1)]}}])},[_c('template',{slot:\"header\"},[_c('el-input',{attrs:{\"size\":\"mini\",\"placeholder\":\"Type to search\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1)],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <el-table :data=\"all_commande.filter(data => !search || data.code.toLowerCase().includes(search.toLowerCase()))\" style=\"width: 100% cursor:pointer\">\r\n\r\n        <el-table-column label=\"status\" width=\"120\">\r\n            <template slot-scope=\"scope\">\r\n                <el-tag v-if=\"scope.row.status == 0\" type=\"info\" size=\"medium\">{{ scope.row.status_t }}</el-tag>\r\n                <el-tag v-if=\"scope.row.status == 1\" size=\"medium\">{{ scope.row.status_t }}</el-tag>\r\n                <el-tag v-if=\"scope.row.status == 2\" type=\"success\" size=\"medium\">{{ scope.row.status_t }}</el-tag>\r\n            </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"Code\" prop=\"code\">\r\n        </el-table-column>\r\n        <el-table-column label=\"Client\" prop=\"nom_client\">\r\n        </el-table-column>\r\n        <el-table-column label=\"Prix total\" prop=\"prix_total\">\r\n        </el-table-column>\r\n        \r\n        <el-table-column label=\"Auteur\" prop=\"name\">\r\n        </el-table-column>\r\n        <el-table-column label=\"Date de creation\" prop=\"created_at\">\r\n        </el-table-column>\r\n\r\n        <el-table-column align=\"right\">\r\n            <!-- <template slot=\"header\" slot-scope=\"scope\"> -->\r\n            <template slot=\"header\">\r\n                <el-input  v-model=\"search\"  size=\"mini\" placeholder=\"Type to search\"/>\r\n            </template>\r\n            <template slot-scope=\"scope\">\r\n                <div class=\"row mr-2\">\r\n                    <el-select class=\"col\" v-model=\"scope.row.status\" :change=\"handleChangeState(scope.row)\" placeholder=\"Status\" size=\"small\"><el-option v-for=\"item in optionStatus\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" :disabled=\"item.disabled\"> </el-option></el-select>\r\n                </div>\r\n            </template>\r\n        </el-table-column>\r\n\r\n    </el-table>\r\n</template>\r\n\r\n<script>\r\n\r\nimport axios from 'axios';\r\n// import moment from 'moment';\r\nimport NProgress from 'nprogress';\r\n\r\nexport default {\r\n    \r\n    props: ['all_commande', 'loadConfig'],\r\n\r\n    data(){\r\n\r\n        return {\r\n\r\n            search: '',\r\n            optionStatus:[\r\n                {\r\n                    label: 'En cours',\r\n                    value: 0,\r\n                },\r\n                {\r\n                    label: 'En attente de recuperation',\r\n                    value: 1\r\n                },\r\n                {\r\n                    label: 'Terminer',\r\n                    value: 2\r\n                }\r\n            ],\r\n\r\n        }\r\n            \r\n    },\r\n\r\n    methods: {\r\n\r\n        handleChangeState(data){\r\n           \r\n            NProgress.start();\r\n\r\n            this.all_commande.forEach(element => {\r\n\r\n              if (element.id == data.id) {\r\n                if (element.status_active === data.status) {\r\n                  console.log(\"equal\");\r\n                }\r\n                else {\r\n                  console.log(\"update\");\r\n                  this.updateCommande(data);\r\n                }\r\n              }\r\n            });\r\n\r\n            NProgress.done();\r\n\r\n        },\r\n\r\n        showRow(data) {\r\n            console.log(data);\r\n        },\r\n\r\n        async updateCommande(data){\r\n\r\n\r\n            let commande = {\r\n                id : data.id,\r\n                status: data.status,\r\n            };\r\n\r\n            NProgress.start();\r\n            try {\r\n\r\n                await axios.post('xpress/commande/updateState', commande);\r\n                this.$notify({\r\n                    type: 'success',\r\n                    title: \"Enregistrer\"\r\n                });\r\n\r\n                this.loadConfig();\r\n\r\n            } \r\n            catch (error) {\r\n                    this.$notify({\r\n                    type: 'error',\r\n                    title: \"Echec d'enregistrement\"\r\n                });\r\n            }\r\n            NProgress.done();\r\n        }\r\n    },\r\n\r\n\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TableList.vue?vue&type=template&id=bbe976f4&\"\nimport script from \"./TableList.vue?vue&type=script&lang=js&\"\nexport * from \"./TableList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"m-5\">\r\n\r\n    \r\n        <div class=\"row\" >\r\n            <div class=\"col-xl-3 col-lg-4 col-md-5 col-sm-6 col-xs-6 mb-1\">\r\n                \r\n                    <label>{{periode}} : </label>\r\n                    <div class=\"data-picker\" style=\"width:100%\">\r\n                        <el-date-picker\r\n                            v-model=\"drp\"\r\n                            type=\"daterange\"\r\n                            unlink-panels\r\n                            range-separator=\"-\"\r\n                            format=\"dd/MM/yyyy\"\r\n                            :clearable=\"clearable\"\r\n                            @change=\"loadFilter()\"\r\n                            :picker-options=\"pickerOptions\">\r\n                        </el-date-picker>\r\n                    </div>\r\n            </div>\r\n            <div class=\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-xs-3 margin-bottom\">\r\n                <label>Choisir le status : </label>\r\n                <div class=\"data-picker\" style=\"width:100%\">\r\n                    <ui-select\r\n                        placeholder=\"Choisir une usine\"\r\n                        @change=\"loadConfig()\"\r\n                        :options=\"status\"\r\n                        v-model=\"statusSelect\"\r\n                    ></ui-select>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-xs-3 margin-bottom ml-2\">\r\n                <label>Auteur : </label>\r\n                <div class=\"data-picker\" style=\"width:100%\">\r\n                    <ui-select\r\n                        placeholder=\"Choisir une usine\"\r\n                        :options=\"usersList\"\r\n                        @change=\"loadConfig()\"\r\n                        v-model=\"usersSelect\"\r\n                    ></ui-select>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <v-divider class=\"mt-5\"></v-divider>\r\n\r\n        <div class=\"card mt-3\" v-if=\"(all_commande.length > 0) && (loading == false)\">\r\n            <TableList v-bind:all_commande=\"all_commande\" v-bind:loadConfig=\"loadFilter\" v-bind:type=\"type\"/>\r\n        </div>\r\n        <div class=\"mt-3\">   \r\n            <template>\r\n                <el-skeleton :loading=\"loading\" animated :rows=\"6\" />\r\n            </template>\r\n        </div>\r\n        <div class=\"resultat\" v-if=\"(all_commande.length == 0 || all_commande.length == '' || all_commande.length == ' ') && (loading == false)\">\r\n                <el-empty description=\"Pas de donnÃ©es\"></el-empty>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\nimport NProgress from 'nprogress';\r\nimport TableList from '@/components/dashboard/orders/TableList.vue';\r\n\r\n\r\nexport default {\r\n\r\n    components: {\r\n        TableList,\r\n    },\r\n    data() {\r\n        return {\r\n            type: 'periode',\r\n\r\n            is_done : 0,\r\n            status: [],\r\n            usersList: [],\r\n            usersSelect: '',\r\n            statusSelect: '',\r\n\r\n            periode: 'Choisir la periode',\r\n            start:  moment().subtract(12, 'month').startOf('month').toDate(),\r\n            end: moment().toDate(),\r\n            clearable: true,\r\n            //drp : [moment().subtract(200, 'isoweek').startOf('isoweek').toDate(), moment().subtract(1, 'isoweek').endOf('isoweek').toDate()],\r\n            drp : [moment().subtract(1, 'isoweek').startOf('isoweek').toDate(), moment().toDate()],\r\n            pickerOptions: {\r\n                shortcuts: [{\r\n                    text: 'Mois precedent',\r\n                    onClick(picker) {\r\n                        picker.$emit('pick', [moment().subtract(1, 'month').startOf('month').toDate(), moment().subtract(1, 'month').endOf('month').toDate()]);\r\n                    }\r\n                }, \r\n                {\r\n                    text: 'Mois en cours',\r\n                    onClick(picker) {\r\n                        picker.$emit('pick', [moment().startOf('month').toDate(), new Date()]);\r\n                    }\r\n                }, \r\n                {\r\n                    text: 'Semaine precedente',\r\n                    onClick(picker) {\r\n                        picker.$emit('pick', [moment().subtract(1, 'week').startOf('isoWeek').toDate(), moment().subtract(1, 'week').endOf('isoWeek').toDate()]);\r\n                    }\r\n                }, \r\n                {\r\n                    text: 'Semaine en cours',\r\n                    onClick(picker) {\r\n                        picker.$emit('pick', [moment().startOf('isoWeek').toDate(), new Date()]);\r\n                    }\r\n                }, \r\n                {\r\n                    text:'Avant hier',\r\n                    onClick(picker) {\r\n                        picker.$emit('pick', [moment().subtract(2, 'day').toDate(), moment().subtract(2, 'day').toDate()]);\r\n                    }\r\n                }, \r\n                {\r\n                    text: 'Hier',\r\n                    onClick(picker) {\r\n                        picker.$emit('pick', [moment().subtract(1, 'day').toDate(), moment().subtract(1, 'day').toDate()]);\r\n                    }\r\n                }, {\r\n                    text: 'Aujoudhuit',\r\n                    onClick(picker) {\r\n                        picker.$emit('pick', [moment().toDate(), new Date()]);\r\n                    }\r\n                }],\r\n                format:'dd MM yyyy',\r\n                firstDayOfWeek: 1,\r\n                disabledDate: this.disabledDueDate\r\n            },\r\n\r\n            loading: false,\r\n            \r\n            all_commande: [],\r\n        }\r\n    },\r\n\r\n    created() {\r\n        moment.locale('fr');\r\n        this.loadFilter();\r\n    },\r\n\r\n\r\n    methods: {\r\n        disabledDueDate(date) {   \r\n            return !(date >= this.start && date <= this.end)\r\n        },\r\n\r\n        async loadFilter()\r\n        {\r\n            NProgress.start();\r\n\r\n            try {\r\n                let crm = {\r\n                    start: moment(new Date(this.drp[0])).startOf('day').format('YYYY-MM-DD HH:mm:ss.SSS'),\r\n                    end: moment(new Date(this.drp[1])).endOf('day').format('YYYY-MM-DD HH:mm:ss.SSS'),\r\n                };\r\n\r\n\r\n\r\n                const response = await axios.post('xpress/commande/getFilter', crm);\r\n                var res = response.data.users;\r\n                var status = [];\r\n                var tab_status = [];\r\n                var tab = [];\r\n                var name = [];\r\n                let s = '';\r\n\r\n\r\n\r\n                res.forEach(element => {\r\n                    \r\n\r\n                    if (!name.includes(element.name)) {\r\n                        name.push(element.name);\r\n                        tab.push({\r\n                            label: element.name,\r\n                            value: element.id\r\n                        });\r\n                    }\r\n\r\n\r\n\r\n                    if (element.status == 0) {\r\n\r\n                        s = 'En cours';\r\n                        if (!status.includes(s)) {\r\n                            status.push(s);\r\n                            tab_status.push({\r\n                                label: s,\r\n                                value: element.status\r\n                            });\r\n                        }\r\n                        \r\n                    } else if (element.status == 1) {\r\n\r\n                        s = 'En attente de Recuperation';\r\n                        if (!status.includes(s)) {\r\n                            status.push(s);\r\n                            tab_status.push({\r\n                                label: s,\r\n                                value: element.status\r\n                            });\r\n                        }\r\n                        \r\n                    } else if (element.status == 2) {\r\n\r\n                        s = 'Terminer';\r\n                        if (!status.includes(s)) {\r\n                            status.push(s);\r\n                            tab_status.push({\r\n                                label: s,\r\n                                value: element.status\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                });\r\n\r\n                this.usersList = tab;\r\n                this.usersList.unshift({\r\n                    label: 'Tous',\r\n                    value: 0\r\n                });\r\n                this.usersSelect = this.usersList[0];\r\n\r\n                this.status = tab_status;\r\n\r\n                this.status.unshift({\r\n                    label: 'Tous',\r\n                    value: 4\r\n                });\r\n\r\n                this.statusSelect = this.status[0];\r\n\r\n                 this.loadConfig();\r\n                \r\n            } catch (error) {\r\n                this.$notify({\r\n                  type: 'error',\r\n                  title: \"Echec de recuperation\"\r\n              });\r\n            }\r\n\r\n            NProgress.done();\r\n\r\n        },\r\n\r\n        async loadConfig() \r\n        {\r\n            // Start loading\r\n            this.loading = true;\r\n            NProgress.start();\r\n            \r\n            let crm = {\r\n                start: moment(new Date(this.drp[0])).startOf('day').format('YYYY-MM-DD HH:mm:ss.SSS'),\r\n                end: moment(new Date(this.drp[1])).endOf('day').format('YYYY-MM-DD HH:mm:ss.SSS'),\r\n                status: this.statusSelect['value'],\r\n                user: this.usersSelect['value'],\r\n\r\n            };\r\n\r\n            console.log(crm);\r\n\r\n            const response = await axios.post('/xpress/commande/allPressingCmdUser', crm);\r\n            \r\n            // End of skeleton loading\r\n            this.loading = false;\r\n\r\n            var commandes = response.data.commande;\r\n\r\n            commandes.forEach(element => {\r\n                if (element.status == 0) {\r\n                    element['status_t']= 'en cours';\r\n                }\r\n                else if (element.status == 1) {\r\n                    element['status_t']= 'En attente de R';\r\n                }\r\n                else if (element.status == 2) {\r\n                    element['status_t']= 'Terminer';\r\n                }\r\n\r\n                element['status_active'] = element.status;\r\n                element.created_at = moment(new Date(element.created_at)).startOf('day').format('DD/MM/YYYY HH:mm:ss')\r\n                console.log(element.created_at);\r\n            });\r\n\r\n            this.all_commande = commandes;\r\n            this.all_commande_detail = response.data.commande_details;\r\n\r\n            NProgress.done();\r\n        },\r\n\r\n        handleChangeState(data){\r\n           \r\n            NProgress.start();\r\n\r\n            this.all_commande.forEach(element => {\r\n\r\n              if (element.id == data.id) {\r\n                if (!element.status_active === data.status) {\r\n                    console.log(\"update\");\r\n                    this.updateCommande(data);\r\n                }\r\n              }\r\n            });\r\n\r\n            NProgress.done();\r\n\r\n        },\r\n\r\n        async updateCommande(data){\r\n            \r\n            NProgress.start();\r\n            try {\r\n\r\n                await axios.post('xpress/commande/update', data);\r\n                this.$notify({\r\n                    type: 'success',\r\n                    title: \"Enregistrer\"\r\n                });\r\n\r\n            } \r\n            catch (error) {\r\n                    this.$notify({\r\n                    type: 'error',\r\n                    title: \"Echec d'enregistrement\"\r\n                });\r\n            }\r\n            NProgress.done();\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .input {\r\n    display: inline-block;\r\n    width: 25%;\r\n  }\r\n  .resultat {\r\n    width: 100%;\r\n  }\r\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryCmd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryCmd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StoryCmd.vue?vue&type=template&id=39a31ca2&\"\nimport script from \"./StoryCmd.vue?vue&type=script&lang=js&\"\nexport * from \"./StoryCmd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StoryCmd.vue?vue&type=style&index=0&id=39a31ca2&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar call = require('../internals/function-call');\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar sameValue = require('../internals/same-value');\nvar toString = require('../internals/to-string');\nvar getMethod = require('../internals/get-method');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@search logic\nfixRegExpWellKnownSymbolLogic('search', function (SEARCH, nativeSearch, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.es/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = requireObjectCoercible(this);\n      var searcher = isNullOrUndefined(regexp) ? undefined : getMethod(regexp, SEARCH);\n      return searcher ? call(searcher, regexp, O) : new RegExp(regexp)[SEARCH](toString(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@search\n    function (string) {\n      var rx = anObject(this);\n      var S = toString(string);\n      var res = maybeCallNative(nativeSearch, rx, S);\n\n      if (res.done) return res.value;\n\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryCmd.vue?vue&type=style&index=0&id=39a31ca2&prod&lang=css&\""],"sourceRoot":""}