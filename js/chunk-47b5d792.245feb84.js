(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47b5d792"],{"3c65":function(t,e,a){"use strict";var o=a("23e7"),i=a("7b0b"),n=a("07fa"),r=a("3a34"),s=a("083a"),c=a("3511"),l=1!==[].unshift(0),d=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},u=l||!d();o({target:"Array",proto:!0,arity:1,forced:u},{unshift:function(t){var e=i(this),a=n(e),o=arguments.length;if(o){c(a+o);var l=a;while(l--){var d=l+o;l in e?e[d]=e[l]:s(e,d)}for(var u=0;u<o;u++)e[u]=arguments[u]}return r(e,a+o)}})},"6b3d":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-xs-3 margin-bottom"},[e("label",{staticClass:"mb-2"},[t._v(" Format d'affichage: ")]),e("div",[e("el-radio",{attrs:{label:"jour"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("Jours")]),e("el-radio",{attrs:{label:"mois"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("Mois")])],1)]),"jour"==t.radio?e("div",{staticClass:"col-xl-4 col-lg-4 col-md-5 col-sm-6 col-xs-6 mb-1"},[e("label",[t._v("Choisir la période : ")]),e("div",{staticClass:"data-picker",staticStyle:{width:"100%"}},[e("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"-",format:"dd/MM/yyyy",clearable:t.clearable,"picker-options":t.pickerOptions_j},on:{change:function(e){return t.loadData()}},model:{value:t.drp_jour,callback:function(e){t.drp_jour=e},expression:"drp_jour"}})],1)]):t._e(),"mois"==t.radio?e("div",{staticClass:"col-xl-4 col-lg-4 col-md-5 col-sm-6 col-xs-6 mb-1"},[e("label",[t._v("Choisir la période : ")]),e("div",{staticClass:"data-picker",staticStyle:{width:"100%"}},[e("el-date-picker",{attrs:{format:"dd/MM/yyyy",type:"monthrange",align:"right","unlink-panels":"","range-separator":"à","start-placeholder":"Mois de début","end-placeholder":"Mois de fin","picker-options":t.pickerOptions_m},on:{change:function(e){return t.loadData()}},model:{value:t.drp_month,callback:function(e){t.drp_month=e},expression:"drp_month"}})],1)]):t._e(),e("div",{staticClass:"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-xs-3 margin-bottom"},[e("label",{staticClass:"mb-2"},[t._v(t._s(t.titleChoice)+" : ")]),e("div",{staticClass:"data-picker",staticStyle:{width:"100%"}},[e("ui-select",{attrs:{placeholder:t.titleChoice,options:t.agencesOption},on:{change:function(e){return t.loadData()}},model:{value:t.agenceSelect,callback:function(e){t.agenceSelect=e},expression:"agenceSelect"}})],1)])]),1==t.empty?e("div",{staticClass:"row"},[e("el-divider"),e("el-empty",{attrs:{description:"Pas de données pour la période"}})],1):e("div",{staticClass:"row m-2 p-2"},[t._m(0),e("BarchartMulti",{attrs:{data1:t.data1,data2:t.data2}}),e("el-divider"),t._m(1),t._m(2),e("TablesDates",{attrs:{datatable:t.datatable,type:t.type}})],1)])},i=[function(){var t=this,e=t._self._c;return e("h4",[e("i",[t._v(" Graphique en minutes du retard ")])])},function(){var t=this,e=t._self._c;return e("h4",[e("i",[t._v(" Tableau global ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row m-4",staticStyle:{display:"flex","align-content":"center","align-items":"center","max-width":"600px"}},[e("table",[e("tr",[e("th",{staticStyle:{border:"none","text-align":"center"}},[t._v("moins de 5 min")]),e("th",{staticStyle:{width:"30px",height:"30px","border-radius":"50%",border:"none","background-color":"#6aa84f"}}),e("th",{staticStyle:{border:"none","text-align":"center"}},[t._v("| Entre 5 et 15 min")]),e("th",{staticStyle:{width:"30px",height:"30px","border-radius":"50%",border:"none","background-color":"#f6b26b"}}),e("th",{staticStyle:{border:"none","text-align":"center"}},[t._v("| Plus de 15 min")]),e("th",{staticStyle:{width:"30px",height:"30px","border-radius":"50%",border:"none","background-color":"#e06666"}})])])])}],n=a("c7eb"),r=a("1da1"),s=(a("d3b7"),a("159b"),a("caad"),a("2532"),a("14d9"),a("3c65"),a("997f")),c=a("cee4"),l=a("c1df"),d=a.n(l),u=a("323e"),h=a.n(u),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mr-5 p-2"},[e("apexchart",{attrs:{height:"350px",type:"bar",options:t.options,series:t.series}})],1)},f=[],m=a("5530"),b=a("1321"),v=a.n(b),g={components:{apexchart:v.a},props:["data1","data2"],data:function(){return{series:[],options:{chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},dataLabels:{enabled:!0},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:[]},yaxis:{title:{text:"Durée en minutes"}},fill:{opacity:1},tooltip:{y:{formatter:function(t){return t+" minutes"}}}}}},watch:{data1:function(){this.options=Object(m["a"])(Object(m["a"])({},this.options),{xaxis:{categories:this.data1}}),this.series=this.data2}},mounted:function(){this.series=this.data2,this.options=Object(m["a"])(Object(m["a"])({},this.options),{xaxis:{categories:this.data1}})}},D=g,y=a("2877"),k=Object(y["a"])(D,p,f,!1,null,null,null),x=k.exports,_=a("0d5b"),w={components:{Menu:s["default"],BarchartMulti:x,TablesDates:_["a"]},props:["agencesOption","agenceSelect"],data:function(){return{type:"agence",titleChoice:"Choisir l'agence",data1:[],data2:[],datatable:[],users:["kevin"],selected_user:[],radio:"jour",status:"",empty:1,statusSelect:[],periode:"Choisir la periode",start:d()().subtract(12,"month").startOf("month").toDate(),end:d()().toDate(),clearable:!0,drp_jour:[d()().subtract(1,"isoweek").startOf("isoweek").toDate(),d()().toDate()],drp_month:[d()().subtract(4,"month").endOf("month").toDate(),d()().endOf("month").toDate()],pickerOptions_j:{shortcuts:[{text:"Mois precedent",onClick:function(t){t.$emit("pick",[d()().subtract(1,"month").startOf("month").toDate(),d()().subtract(1,"month").endOf("month").toDate()])}},{text:"Mois en cours",onClick:function(t){t.$emit("pick",[d()().startOf("month").toDate(),new Date])}},{text:"Semaine precedente",onClick:function(t){t.$emit("pick",[d()().subtract(1,"week").startOf("isoWeek").toDate(),d()().subtract(1,"week").endOf("isoWeek").toDate()])}},{text:"Semaine en cours",onClick:function(t){t.$emit("pick",[d()().startOf("isoWeek").toDate(),new Date])}},{text:"Avant hier",onClick:function(t){t.$emit("pick",[d()().subtract(2,"day").toDate(),d()().subtract(2,"day").toDate()])}},{text:"Hier",onClick:function(t){t.$emit("pick",[d()().subtract(1,"day").toDate(),d()().subtract(1,"day").toDate()])}},{text:"Aujoudhuit",onClick:function(t){t.$emit("pick",[d()().toDate(),new Date])}}],format:"dd MM yyyy",firstDayOfWeek:1,disabledDate:this.disabledDueDate},pickerOptions_m:{shortcuts:[{text:"Ce mois",onClick:function(t){t.$emit("pick",[d()().startOf("month").toDate(),d()().endOf("month").toDate()])}},{text:"Cette année",onClick:function(t){t.$emit("pick",[d()().startOf("year").toDate(),d()().endOf("month").toDate()])}},{text:"Les derniers 6 mois",onClick:function(t){t.$emit("pick",[d()().subtract(5,"month").startOf("month").toDate(),d()().toDate()])}}],format:"dd MM yyyy",firstDayOfWeek:1,disabledDate:this.disabledDueDate}}},watch:{radio:function(){this.loadData()},agenceSelect:function(){this.loadData()}},methods:{loadData:function(){var t=this;return Object(r["a"])(Object(n["a"])().mark((function e(){var a,o,i;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return h.a.start(),e.prev=1,"jour"==t.radio?t.drp=t.drp_jour:"mois"==t.radio&&(t.drp=t.drp_month),a={agence:t.agenceSelect.value,start:d()(new Date(t.drp[0])).startOf("day").format("YYYY-MM-DD HH:mm:ss.SSS"),end:d()(new Date(t.drp[1])).endOf("day").format("YYYY-MM-DD HH:mm:ss.SSS")},e.next=6,c["a"].post("xperf/report/GbAgencelog",a);case 6:o=e.sent,i=o.data.data_agence,console.log(i),i.length>0?(t.empty=0,t.BuildApexChart(i),t.BuildTable(i)):t.empty=1,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),t.$notify({type:"error",title:"Echec de recuperation des informations "});case 15:h.a.done();case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()},BuildApexChart:function(t){var e=this;this.data1=[],this.data2=[];var a=[],o=[];if("jour"==this.radio)this.data1=[],this.data2=[],t.forEach((function(t){var e=d()(new Date(t.jour)).format("DD/MM/YYYY");a.includes(t.nom)||a.push(t.nom),o.includes(e)||o.push(e)})),console.log(a),console.log(o),a.forEach((function(a){var i=[];o.forEach((function(e){var o=0;t.forEach((function(t){t.nom==a&&e==d()(new Date(t.jour)).format("DD/MM/YYYY")&&(o+=t.minute)})),i.push(o)}));var n={name:a,data:i};console.log(n),e.data2.push(n)})),this.data1=o;else if("mois"==this.radio){this.data1=[],this.data2=[];a=[];t.forEach((function(t){e.data1.includes(t.mois_texte)||e.data1.unshift(t.mois_texte),a.includes(t.nom)||a.push(t.nom)})),console.log(a),console.log(this.data1),a.forEach((function(a){var o=[];e.data1.forEach((function(e){var i=0;t.forEach((function(t){t.nom==a&&e==t.mois_texte&&(i+=t.minute)})),o.push(i)}));var i={name:a,data:o};console.log(i),e.data2.push(i)}))}},BuildTable:function(t){t.forEach((function(t){t.jour=d()(new Date(t.jour)).format("DD/MM/YYYY"),t.date=d()(new Date(t.date)).format("HH:mm:ss")})),this.datatable=t}}},O=w,C=Object(y["a"])(O,o,i,!1,null,null,null);e["default"]=C.exports}}]);
//# sourceMappingURL=chunk-47b5d792.245feb84.js.map